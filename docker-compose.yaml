services:
  hr-pro-agent:
    build: .
    image: hr-pro-agent:local
    container_name: hr-pro-agent
    user: "1000:1000"

    # Only /app/out is writable (mounted)
    volumes:
      - ./out:/app/out:rw

    # Security hardening
    read_only: true
    tmpfs:
      - /tmp:mode=1777,size=100m

    environment:
      - GEMINI_API_KEY=${GEMINI_API_KEY}

    # Override with: docker compose run --rm hr-pro-agent python run_agent.py --query "Python Kyiv" --mode fast
    command: ["python", "run_agent.py", "--help"]
