Этот файл фиксирует принятые архитектурные и методологические решения по проекту HR-Pro.

Документ предназначен для:

синхронизации работы ИИ-агентов и разработчиков;

предотвращения повторного обсуждения уже принятых решений;

исключения самовольных рефакторингов и архитектурных сдвигов;

однозначного понимания границ текущего этапа разработки.

Все решения в этом файле считаются обязательными к соблюдению, пока не будут явно пересмотрены и зафиксированы здесь же.

Нотация и правила

Верхний уровень плана обозначается как L1_1 … L1_8.

Подпункты внутри каждого пункта обозначаются как 1.1, 1.2 … / 8.1, 8.2 ….

Решения привязываются к пунктам плана, но действуют до их явной отмены.

Обозначения вида L6, L1.5 как подпункт пункта 1 не используются.

Общие принципы проекта
D-G-1. Последовательность этапов

Разработка ведётся строго по пунктам верхнего уровня L1_1 → L1_8.
Переход к следующему пункту допускается только после:

фактического завершения текущего пункта;

фиксации статуса в STATUS.md;

фиксации решений (если они были приняты) в этом файле.

D-G-2. Документация как источник истины

Markdown-документация в репозитории является источником истины.
Любые изменения архитектуры, логики или трактовки этапов должны быть:

сначала оформлены как решение;

затем отражены в коде;

после этого зафиксированы в документации.

Решения по реализованным пунктам
D-L1_1-1. Локальная разработка как стартовая точка

Для проекта принят подход Local First:

все ключевые компоненты сначала реализуются и проверяются локально;

облачная инфраструктура подключается только после стабилизации логики.

Это решение действует для всех пунктов плана.

D-L1_2-1. Расширение контрактов данных

Контракты данных (DTO, контейнеры результатов, статусы качества данных)
могут расширяться относительно исходного описания, если это повышает:

устойчивость системы;

явность ошибок;

пригодность к масштабированию.

Расширение контрактов не считается отклонением от плана, если:

не ломает существующие инварианты;

документально зафиксировано.

D-L1_3-1. Resilient HTTP как подготовительный слой

Модуль защищённого транспорта (Resilient HTTP):

реализуется на этапе L1_3;

предназначен для последующих этапов масштабирования;

не обязан использоваться в runtime на этапе Local MVP.

Наличие реализованного, но не подключённого модуля считается нормой.

D-L1_5-1. Эталон Local MVP

Для локального MVP зафиксировано следующее решение:

эталонный транспорт — SmartFetcher;

транспорт синхронный;

используется библиотека requests;

прокси не используются;

управление скоростью осуществляется через явный троттлинг;

поведение при BAN / CAPTCHA — корректная остановка выполнения.

Это решение является обязательным для всех работ в рамках L1_1–L1_5.

D-L1_5-2. Запрет преждевременного рефакторинга

На этапе Local MVP запрещено:

переводить код на асинхронную модель;

заменять SmartFetcher на другой транспорт;

внедрять прокси или сложные retry-механизмы;

проводить «оптимизации», не связанные с исправлением ошибок.

Любые такие изменения считаются нарушением архитектурных границ этапа.

D-L1_5-3. Хранение данных

Требование об отсутствии долговременного хранения данных:

относится к этапам cloud/agent-интеграции;

не применяется к Local MVP.

Использование локального JSONL-файла на этапе L1_5 является допустимым и осознанным решением.

Решения по следующим пунктам
D-L1_6-1. Принцип перехода к следующему пункту

При переходе к L1_6:

текущие контракты данных считаются стабильными;

эталон поведения Local MVP должен быть сохранён;

изменения допускаются только в рамках явно поставленных задач пункта L1_6.

Итог

Зафиксированные ключевые решения:

разработка ведётся последовательно по L1_1 → L1_8;

Local MVP имеет чётко ограниченную архитектуру;

SmartFetcher является эталонным транспортом для локального уровня;

Resilient HTTP подготовлен, но подключается позже;

преждевременный рефакторинг запрещён.

Этот файл должен обновляться только при осознанном изменении решений.